<!DOCTYPE html>
<html>
<head>
  <title>LCP Address location</title>

  <!-- Stylesheets -->
  <link href="https://unpkg.com/maplibre-gl@1.14.0/dist/maplibre-gl.css" rel="stylesheet">
  <link rel="stylesheet" href="/stylesheets/layout.css">
  <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@4.0.2/dist/maplibre-gl.css' />
  <link rel="stylesheet" href="https://esri.github.io/calcite-maps/dist/css/calcite-maps-bootstrap.min-v0.10.css">
  <link rel="stylesheet" href="https://esri.github.io/calcite-maps/dist/css/calcite-maps-arcgis-4.x.min-v0.10.css">
  <link rel="stylesheet" href="https://js.arcgis.com/4.10/esri/css/main.css">
  <link rel="stylesheet" href="https://js.arcgis.com/calcite-components/2.6.0/calcite.css" />
    <link rel="stylesheet" href="/stylesheets/dist/css/calcite-maps-bootstrap.min-v0.10.css">
    <link rel="stylesheet" href="/stylesheets/dist/css/calcite-maps-arcgis-4.x.min-v0.10.css">
    <link rel="stylesheet" href="https://js.arcgis.com/4.10/esri/css/main.css">
    <link href='https://watergis.github.io/mapbox-gl-export/mapbox-gl-export.css' rel='stylesheet' />

  <!-- JavaScript Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/alasql/4.2.5/alasql.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ol@v7.4.0/dist/ol.js"></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
  <script src="https://labs.os.uk/public/os-api-branding/v0.3.1/os-api-branding.js"></script>
  <script src="https://unpkg.com/maplibre-gl@1.14.0/dist/maplibre-gl.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.7.5/proj4.js"></script>
  <script src="https://geographiclib.sourceforge.io/scripts/geographiclib-geodesic.min.js"></script>
  <script src="https://geographiclib.sourceforge.io/scripts/geographiclib-dms.min.js"></script>
  <script src="https://unpkg.com/konva@9/konva.min.js"></script>
  <script src='https://unpkg.com/maplibre-gl@4.0.2/dist/maplibre-gl.js'></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src='https://api.mapbox.com/mapbox-gl-js/v1.13.1/mapbox-gl.js'></script>
  <script src="https://watergis.github.io/mapbox-gl-export/mapbox-gl-export.js"></script>
    <!-- import 'amCharts 4' needed for populating polygons with labels-->
    <script src="//cdn.amcharts.com/lib/4/core.js"></script>
    <script src="//cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="//cdn.amcharts.com/lib/4/maps.js"></script>
</head>
<!-- <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"> -->
<!-- Map Layer options templatÃŸe. -->

<body class="calcite-maps calcite-nav-top">


  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
  </style>
  
</head>
  <!-- Navbar -->

  <nav class="navbar calcite-navbar navbar-fixed-top calcite-text-light calcite-bg-dark calcite-bgcolor-dark-blue">
    <!-- Menu -->
    <div class="dropdown calcite-dropdown calcite-bg-light calcite-text-dark" role="presentation">
      <a class="dropdown-toggle" role="menubutton" aria-haspopup="true" aria-expanded="false" tabindex="0">
        <div class="calcite-dropdown-toggle">
          <span class="sr-only">Toggle dropdown menu</span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
      </a>
      <ul class="dropdown-menu calcite-menu-drawer">
        <li><a class="hidden-md hidden-lg" href="#mapTab" aria-controls="mapTab" role="tab" data-toggle="tab"> Map</a></li>
        <li><a class="active hidden-md hidden-lg" href="#sceneTab" aria-controls="sceneTab" role="tab" data-toggle="tab"> Scene</a></li>
        <li><a role="menuitem" tabindex="0" data-target="#panelInfo" aria-haspopup="true"><span class="glyphicon glyphicon-info-sign"></span> Info</a></li>
        <li><a role="menuitem" tabindex="0" data-target="#panelBasemaps" aria-haspopup="true"><span class="glyphicon glyphicon-th-large"></span> Basemaps</a></li>
        <li><a role="menuitem" tabindex="0" data-target="#panelFilter" aria-haspopup="true"><span class="glyphicon glyphicon-filter"></span> Filter</a></li>
        <li><a role="menuitem" tabindex="0" data-target="#panelColouring" aria-haspopup="true"><span class="glyphicon glyphicon-pencil"></span> Colouring</a></li>
        <li><a role="menuitem" tabindex="0" data-target="#panelDevTesting" aria-haspopup="true"><span class="glyphicon glyphicon-fire"></span> Dev Testing</a></li>
        <li><a role="menuitem" tabindex="0" id="calciteToggleNavbar" aria-haspopup="true"><span class="glyphicon glyphicon-fullscreen"></span> Full Map</a></li>
      </ul>
    </div>
    <!-- Title -->
    <div class="calcite-title calcite-overflow-hidden">
      <span class="calcite-title-main">LCP Maps</span>
      <span class="calcite-title-divider hidden-xs"></span>
      <span class="calcite-title-sub hidden-xs">Automating the Boring Stuff since November 2023</span> 
    </div>
     <!-- Nav -->
    <ul class="calcite-nav nav navbar-nav">    
           <!-- If we want nav bars which link to other places in the website           -->
      <!-- <li><a id="mapNav" class="hidden-xs hidden-sm" href="#mapTab" aria-controls="mapTab" aria-expanded="true" role="tab" data-toggle="tab" data-tooltip="tip" title="2D View" data-placement="bottom">Map</a></li> -->
      <li>
        <div class="calcite-navbar-search calcite-search-expander" role="presentation" tabindex="-1">
          <div id="searchNavDiv" tabindex="0"></div>
        </div>
      </li>
    </ul>

  </nav><!--/.navbar -->



  <!-- Panel Container -->

  <div class="calcite-panels calcite-panels-right calcite-bg-custom calcite-text-light calcite-bgcolor-dark-blue panel-group" role="tablist" aria-multiselectable="true">
        
    <!-- Info Panel -->
    <div id="panelInfo" class="panel collapse">
      <div id="headingInfo" class="panel-heading" role="tab">
        <div class="panel-title">
          <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseInfo"  aria-expanded="true" aria-controls="collapseInfo"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span><span class="panel-label">Info</span></a> 
          <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelInfo"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
        </div>
      </div>
      <div id="collapseInfo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingInfo">
        <div class="panel-body">
          <p>
          Welcome! This is an exploratory project designed to visualise LCP's portfolio by rapdily producing GOAD style maps. We're currently still testing 
          the functionality of the map, so please bear with us. If you have any feedback, email data@lcpproperties.co.uk :)</p>
        </div>
     </div>
    </div>

    <!-- Basemaps Panel -->
    <div id="panelBasemaps" class="panel collapse in"> 
      <div id="headingBasemaps" class="panel-heading" role="tab">
        <div class="panel-title">
          <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseBasemaps" aria-expanded="true"   aria-controls="collapseBasemaps"><span class="glyphicon glyphicon-th-large" aria-hidden="true"></span><span class="panel-label">Basemaps</span></a> 
          <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelBasemaps"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
        </div>
      </div>
      <div id="collapseBasemaps" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingBasemaps">
        <div class="panel-body">
          <select id="selectBasemapPanel" class="form-control">
            <option value="GOAD" data-vector="streets-vector">Goad Style</option>
            <option value="Standard" data-vector="satellite" selected="">Standard</option>
            <option value="hybrid" data-vector="hybrid">Hybrid</option>
            <option value="national-geographic" data-vector="national-geographic">National Geographic</option>
            <option value="topo" data-vector="topo-vector">Topographic</option>
            <option value="gray" data-vector="gray-vector">Gray</option>
            <option value="dark-gray" data-vector="dark-gray-vector">Dark Gray</option>
            <option value="osm" data-vector="osm">Open Street Map</option>
            <option value="dark-gray" data-vector="streets-night-vector">Streets Night</option>
            <option value="streets" data-vector="streets-navigation-vector">Streets Mobile</option>
          </select>
        </div>
      </div>
    </div>
<!-- Filtering Panel -->
    <div id="panelFilter" class="panel collapse">
      <div id="headingFilter" class="panel-heading" role="tab">
        <div class="panel-title">
          <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseFilter"  aria-expanded="true" aria-controls="collapseFilter"><span class="glyphicon glyphicon-filter" aria-hidden="true"></span><span class="panel-label">Filter</span></a> 
          <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelFilter"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
        </div>
      </div>
      <div id="collapseFilter" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFilter">
        <div class="panel-body">
          <h2>Filter Options:</h2>
          <h5> Property Reference</h5>
          <div class="calcite-navbar-search">
            <form role="search">
              <div class="input-group" style="display: flex; align-items: center;">
                <input type="search" id="mySearch" onkeyup="searchReferences()" placeholder="Property Reference" title="Type in a category">
                <!-- <div class="input-button">
                  <button type="submit" class="btn btn-clear"><span class="esri-icon esri-icon-search"></span></button>
                </div> -->
                <ul id="myMenu">
                </ul>
              </div>
            </form>
            <h5>Asset Manager</h5>
            <form role="search">
            <div class="input-group" style="display: flex; align-items: center;">
            <input type="search" id="asset_manager_box" onkeyup="searchReferences_asset_managers()" placeholder="Asset Manager">
                <ul id="myMenu_asset_manager">
                </ul> 
          </div>
        </form>
        </div>
          <!-- Add your filter options here -->
        </div>
      </div>
    </div>

<!-- Colouring Panel-->
<div id="panelColouring" class="panel collapse">
  <div id="headingColouring" class="panel-heading" role="tab">
    <div class="panel-title">
      <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseColouring" aria-expanded="false" aria-controls="collapseColouring"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span><span class="panel-label">Colouring</span></a> 
      <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelColouring"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
    </div>
  </div>
  <div id="collapseColouring" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingColouring">
    <div class="panel-body">
      <h4>Select Color:</h4>
      Pick a colour and you can change the style of a building by clicking on it.
      <br>
          <input type="color" id="colorPicker" class = "input-group">
          <h4>By Attribute</h4>
          Or highlight buildings by their attributes!
          <br>
          <select name="colour_by" id="colour_by">
            <option value="default_value">Default (no colour)</option>
            <option value="dmse_type">Demise Type</option>
            <option value="dmse_status">Demise Status</option>
            <option value="epc">EPC</option>
            <option value="passing_rent">Passing Rent</option>
          </select>
          <br><br>
          <div id="colourlegend"></div> <!--  Legend Container -->
    </div>
  </div>
</div>
<!-- Dev Testing Panel -->
<div id="panelDevTesting" class="panel collapse">
  <div id="headingDevTesting" class="panel-heading" role="tab">
    <div class="panel-title">
      <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseDevTesting"  aria-expanded="true" aria-controls="collapseDevTesting"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span><span class="panel-label">Dev Testing</span></a> 
      <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelDevTesting"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
    </div>
  </div>
  <div id="collapseDevTesting" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingDevTesting">
    <div class="panel-body">
      <button class ="big-red-button" id="testGeometry">TEST GEOMETRY</button>
      <button id="testPensnett" class = "big-red-button">Test Pensnett</button> 
      <div id="areaDisplay">
        <p id="totalArea">Total Area: </p>
        <p id="internalArea">Internal Area: </p>
        <p id="externalArea">External Area: </p>
      </div>
      <h2>Drawing Mode</h2>
      <label class="switch">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
      <button id="highlightFeatures" class = "big-red-button">Highlight Buildings</button>
      <div id="legend"></div>
    </div>   
      <!-- Add your development testing tools and information here. -->
    </div>
  </div>
</div>
  </div> <!-- /.calcite-panels -->

  

  <!-- used to see coordinates of where the mouse is -->
  <style type="text/css">
    #info {
        display: block;
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translate(-50%);
        width: 50%;
        padding: 10px;
        border: none;
        border-radius: 3px;
        font-size: 12px;
        text-align: center;
        color: #222;
        background: #fff;
    }
</style>

    <div id="map" ></div>
        <!-- Hidden whilst im testing lol -->
        <div class="map-overlay" style = " margin-top: 200px;" >
        <div id="mapSelect"></div>
        <div id="mapOverlay">
         
        <!-- Radio Buttons at the Top Representing Map Layer Choice
        <input id="Standard" type="radio" name="toggle" value="Standard" checked="checked">
        <label for="Standard">Standard</label>
        <input id="GOAD" type="radio" name="toggle" value="GOAD">
        <label for="GOAD">Goad</label> 
        <input id="Satellite" type="radio" name="toggle" value="Satellite">
        <label for="Satellite">Satellite</label>
        </div> -->

        <!-- The Sidebar Medu Box -->
    <div class="map-overlay-inner" style="display: block">
        <button id = "showFilter" type="button" class="collapsible"onclick="toggleCollapsible(event)">Filter By</button>
        <div class="sections" style = "display:none">

          <h2>Find:</h2>
          <!-- Address (search by) -->
          <p>Address:</p>
            <form id="the-form">
                <textarea id="address-text" placeholder="Enter addresses here, one per line..."></textarea>
                <input id="address-field" type="submit"> 
                <i id="spinner" class="c-inline-spinner"></i>
            </form>
          <!-- Property Reference (search by) -->
          <div class="row">
              <div class="left" >
                <p>Property Reference</p>
                <input type="text" id="mySearch" onkeyup="searchReferences()" placeholder="Type a number" title="Type in a category">
                <!-- <ul id="myMenu">
                </ul> -->
              </div>
          <div id="address-info"><!-- Address information will be displayed here --></div>
          <p>Demise Reference</p>
        
          <h2>Select:</h2>
          <p>Asset Manager</p>
          <input type="text" id="asset_manager_box" onkeyup="searchReferences_asset_managers()" placeholder="Type an Asset Manager">
                <!-- <ul id="myMenu_asset_manager"> -->
                <!-- </ul>  -->
          <p>Group Name</p>
          <p>Demise Type</p>
          <p>Tenant Name</p>
          </div>

          <!--Make sure the form has the autocomplete function switched off:-->
        <form autocomplete="off" action="/action_page.php">
          <div class="autocomplete" style="width:300px;">
            <input id="myInput" type="text" name="myCountry" placeholder="Asset Manager">
          </div>
          <input type="submit">
        </form>


        </div>
        <!-- <div id="canvas-container" style="display: none;"></div> EMPTY DIV TO STOP THROWING ERRORS -->
        <button id = "showColour"  type="button" class="collapsible" onclick="toggleCollapsible(event)">Colour By</button>
        <div class="sections" style = "display:none">
          <h2>Select Color:</h2>
          <input type="color" id="colorPicker">
          <h2>By Attribute</h2>
          <select name="colour_by" id="colour_by">
            <option value="default_value">Default (no colour)</option>
            <option value="dmse_type">Demise Type</option>
            <option value="dmse_status">Demise Status</option>
            <option value="epc">EPC</option>
            <option value="passing_rent">Passing Rent</option>
          </select>
          <br><br>
          <!-- <div id="colourlegend"></div>  Legend Container -->
        </div>

        <button id = "showPrint" type="button" class="collapsible"onclick="toggleCollapsible(event)">Print</button>
        <div class="sections" style = "display:none">
          <button class ="big-red-button" id="exportMap">Image Export</button>
          <h2>Drawing Tools</h2>
          <p>Arrow</p>
          <p>Text</p>
          <p>Legend</p>
          <h2>Bezel Content</h2>
          <p>MCore Logo</p>
          <p>Name of the Property</p>
          <p>Property Reference</p>
        </div>

        <button id = "showOther" type="button" class="collapsible"onclick="toggleCollapsible(event)">Dev Testing</button>
        <div class="sections" style = "display:none">
          <button class ="big-red-button" id="testGeometry">TEST GEOMETRY</button>

          <button id="testPensnett" class = "big-red-button">Test Pensnett</button> 
          <div id="areaDisplay">
            <p id="totalArea">Total Area: </p>
            <p id="internalArea">Internal Area: </p>
            <p id="externalArea">External Area: </p>
          </div>
          <h2>Drawing Mode</h2>
          <label class="switch">
            <input type="checkbox">
            <span class="slider round"></span>
          </label>
          <button id="highlightFeatures" class = "big-red-button">Highlight Buildings</button>
          <!-- <div id="legend"></div> -->
        </div>   
    </div>
    </div>
    </body>
    <!-- These scripts have to go here. Arises due to the pageload query -->
    <script type="text/javascript">
      var dojoConfig = {
        packages: [{
          name: "bootstrap",
          location: location.pathname.replace(/\/[^/]+$/, "") + "./stylesheets/dist/vendor/dojo-bootstrap"
        },
        {
          name: "calcite-maps",
          location: location.pathname.replace(/\/[^/]+$/, "") + "./stylesheets/dist/js/dojo"
        }]
      };
    </script>
    <script src="https://js.arcgis.com/4.10/"></script>
    <script src="/main.js"></script>
    <script defer src="/functions/searching.js"></script>
    <script defer src="/functions/require.js"></script>
    <script defer src="/functions/selecting.js"></script>
    <script defer src="/functions/features.js"></script>
    <script defer src="/functions/functions.js"></script>
    <!-- <script defer src="../public/testingfiles/test.js"></script> -->
    <script defer src="/functions/module.js" type = "module"></script>
    <script defer src="/functions/drawing.js"></script>
    <script defer src="/functions/polygon_layer.js"></script>
    <script defer src="/functions/colouring_in_polygons.js"></script>
    <script defer src="/functions/callingEndpoints.js"></script>
</body>

</html>

